{"version":3,"file":"contentScript.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,aAAa,IAAI,SAAS;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,mBAAmB,eAAe;AAClC;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sC","sources":["webpack://llm-agent-extension/./src/contentScript.js"],"sourcesContent":["// Content script for Snip Chrome Extension\n// This script runs in the context of web pages and handles:\n// - Page content extraction\n// - Communication with the sidebar\n// - Tab/link context management\n\nconsole.log('Snip: Content script loaded');\n\n// Track current page info\nlet currentPageData = {\n  url: window.location.href,\n  title: document.title,\n  content: '',\n  timestamp: Date.now()\n};\n\n// Extract favicon URL from the page\nconst extractFavicon = () => {\n  // Try to find favicon link tag\n  let faviconUrl = null;\n  \n  // Look for various favicon link tags\n  const faviconSelectors = [\n    'link[rel*=\"icon\"]',\n    'link[rel=\"shortcut icon\"]',\n    'link[rel=\"apple-touch-icon\"]',\n    'link[rel=\"icon\"]'\n  ];\n  \n  for (const selector of faviconSelectors) {\n    const link = document.querySelector(selector);\n    if (link && link.getAttribute('href')) {\n      faviconUrl = link.getAttribute('href');\n      // Convert relative URLs to absolute\n      if (faviconUrl && !faviconUrl.startsWith('http')) {\n        faviconUrl = new URL(faviconUrl, window.location.href).href;\n      }\n      break;\n    }\n  }\n  \n  // Fallback to default favicon.ico\n  if (!faviconUrl) {\n    const url = new URL(window.location.href);\n    faviconUrl = `${url.protocol}//${url.host}/favicon.ico`;\n  }\n  \n  return faviconUrl;\n};\n\n// Extract page content for LLM context\nconst extractPageContent = () => {\n  // Get main content, avoiding navigation, ads, etc.\n  const content = document.body.innerText || document.body.textContent || '';\n  \n  // Clean up content - remove extra whitespace\n  const cleanContent = content.replace(/\\s+/g, ' ').trim();\n  \n  return {\n    url: window.location.href,\n    title: document.title,\n    content: cleanContent,\n    favicon: extractFavicon(),\n    timestamp: Date.now()\n  };\n};\n\n// Send page data to extension\nconst sendPageData = (data) => {\n  chrome.runtime.sendMessage({\n    type: 'PAGE_DATA',\n    data: data\n  });\n};\n\n// Listen for messages from extension\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.type === 'GET_PAGE_CONTENT') {\n    const pageData = extractPageContent();\n    sendResponse(pageData);\n  } else if (request.type === 'ADD_CURRENT_PAGE') {\n    const pageData = extractPageContent();\n    sendPageData(pageData);\n    sendResponse({ success: true });\n  }\n});\n\n// Initialize when page loads\nwindow.addEventListener('DOMContentLoaded', () => {\n  console.log('Snip: Page loaded, ready to extract content');\n  currentPageData = extractPageContent();\n});\n\n// Handle navigation changes\nlet lastUrl = window.location.href;\nconst checkForNavigation = () => {\n  if (lastUrl !== window.location.href) {\n    console.log('Snip: Navigation detected');\n    lastUrl = window.location.href;\n    currentPageData = extractPageContent();\n  }\n};\n\n// Check for navigation changes periodically\nsetInterval(checkForNavigation, 1000);"],"names":[],"sourceRoot":""}